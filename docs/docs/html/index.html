<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ambiq NeuralSPOT: NeuralSPOT</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="am_intelligence.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ambiq NeuralSPOT<span id="projectnumber">&#160;Beta</span>
   </div>
   <div id="projectbrief">NeuralSPOT is Ambiq&#39;s collection of AI libraries and tools</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">NeuralSPOT </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md__Users_carlosmorales_AmbiqDev_neuralSPOT_README"></a>NeuralSPOT is Ambiq's AI Enablement Library. It implements an AI-centric API for common tasks such as collecting audio from Ambiq's peripherals, computing features from that audio, controlling power modes, reading accelerometer and gyroscopic data from i2c sensors, and a variety of helper functions and tools which make developing AI features on Ambiq hardware easier.</p>
<p ><img src="image-20220811095223908.png" alt="" class="inline" title="image-20220811095223908"/></p>
<h1><a class="anchor" id="autotoc_md42"></a>
Building and Deploying NeuralSPOT</h1>
<p >NeuralSPOT is designed to be used in two ways:</p><ol type="1">
<li><b>As the 'base of operations' for your AI development</b>. Intended for stand-alone EVB development, you can add new binary (axf) targets to the /examples directory</li>
<li><b>As a seed for adding NeuralSPOT to a larger project</b>. In this mode of operations, you would use NeuralSPOT to create a stub project (a <a href="#The Nest">nest</a>) with everything needed to start running AI on EVBs</li>
</ol>
<h2><a class="anchor" id="autotoc_md43"></a>
Build Options</h2>
<p >All <code>make</code> invocations for NS must be done from the base directory ("nest" makes are different, and defined below). The primary targets are:</p>
<p ><code>make</code> - builds everything, including libraries and every target in examples directory <code>make libraries</code> - builds the neuralspot and extern libraries <code>make clean</code> - deletes every build directory and artifact <code>make nest</code> - creates a minimal '<a href="#The Nest">nest</a>' with a basic <a class="el" href="main_8cc.html" title="Speech-to-Intent using NeuralSPOT.">main.cc</a> stub file</p>
<p >Besides targets, NeuralSPOT has a standard set of compile-time switches to help you configure the build exactly the way you need. These are set via the normal make convention, e.g. <code>make BOARD=apollo4b</code>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">BOARD   </td><td class="markdownTableBodyNone">Defines the target SoC (currently either apollo4b or apollo4p)   </td><td class="markdownTableBodyNone">apollo4p    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">EVB   </td><td class="markdownTableBodyNone">Defines the EVB type (evb or evb_blue)   </td><td class="markdownTableBodyNone">evb    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">BINDIR   </td><td class="markdownTableBodyNone">Name of directories where binaries and build artifacts are stored. Note that there will be one build directory per binary or library being created   </td><td class="markdownTableBodyNone">build    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">NESTDIR   </td><td class="markdownTableBodyNone">Relative path and directory name where nest will be created   </td><td class="markdownTableBodyNone">nest    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">AS_VERSION   </td><td class="markdownTableBodyNone">Ambiqsuite Version   </td><td class="markdownTableBodyNone">R4.1.0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">TF_VERSION   </td><td class="markdownTableBodyNone">Tensflow Lite for Microcontrollers Version   </td><td class="markdownTableBodyNone">R2.3.1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TARGET   </td><td class="markdownTableBodyNone">Defines what target will be loaded by <code>make deploy</code>   </td><td class="markdownTableBodyNone">s2i    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MLDEBUG   </td><td class="markdownTableBodyNone">Setting to '1' turns on TF debug prints   </td><td class="markdownTableBodyNone">0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">AUDIO_DEBUG   </td><td class="markdownTableBodyNone">Setting to '1' turns on RTT audio dump   </td><td class="markdownTableBodyNone">0   </td></tr>
</table>
<p >Note that defaults for these values are set in <code>./make/neuralspot_config.mk</code>. Ambiq EVBs are available in a number of flavors, each of which requiring slightly different config settings. For convenience, these settings can be placed in <code>./make/local_overrides.mk</code> (note that this file is ignored by git to prevent inadvertent overrides making it into the repo).</p>
<h1><a class="anchor" id="autotoc_md44"></a>
NeuralSPOT Repo Structure</h1>
<p >NeuralSPOT consists of the neuralspot library, required external components, and examples.</p>
<div class="fragment"><div class="line"> {/neuralspot}</div>
<div class="line">neuralspot/ - contains neuralspot feature-specific libraries</div>
<div class="line">    ns-audio/</div>
<div class="line">        src/</div>
<div class="line">        include_api/</div>
<div class="line">        module.mk</div>
<div class="line">    ns-ipc/</div>
<div class="line">    ns-&lt;some-other-feature&gt;</div>
<div class="line">    ...</div>
<div class="line">extern/   - contains external dependencies, including TF and AmbiqSuite</div>
<div class="line">    AmbiqSuite/</div>
<div class="line">        &lt;version&gt;/</div>
<div class="line">    tensorflow/</div>
<div class="line">        &lt;version&gt;/</div>
<div class="line">/examples - contains several examples, each of which can be compiled to a deployable axf</div>
<div class="line">/make     - contains makefile helpers, including neuralspot-config.mk</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md45"></a>
NeuralSPOT Theory of Operations.</h1>
<p >NeuralSPOT is a SDK for AI development on Ambiq products via an AI-friendly API. It offers a set of libraries for accessing hardware, pre-configured instances of external dependencies such as AmbiqSuite and Tensorflow Lite for Microcontrollers, and a handful of examples which compile into deployable binaries.</p>
<p ><img src="image-20220811161922376.png" alt="" class="inline" title="image-20220811161922376"/></p>
<h2><a class="anchor" id="autotoc_md46"></a>
NeuralSPOT Libraries</h2>
<p >NeuralSPOT is continuously growing, and offers the following libraries today:</p>
<ol type="1">
<li><code>ns-audio</code>: <a class="el" href="ns-audio_8md.html">Library for sampling audio</a> from Ambiq's audio interfaces and sending them to an AI application via several IPC methods. This library also contains audio-centric common AI feature helpers such as configurable Mel-spectogram computation.</li>
<li><code>ns-peripherals</code>: API for controlling Ambiq's power modes, performance modes, and helpers for commonly used I/O devices such as EVB buttons.</li>
<li><code>ns-harness</code>: a simple harness for abstracting common AmbiqSuite code, meant to be replaced when NeuralSPOT is not being used by AmbiqSuite.</li>
<li><code>ns-ipc</code>: Common mechanisms for presenting collected sensor data to AI applications</li>
<li>(soon)<code>ns-experimental-drivers</code>: Drivers for 3rd party sensors that have not yet been incorporated into mainline AmbiqSuite.</li>
</ol>
<h2><a class="anchor" id="autotoc_md47"></a>
The Nest</h2>
<p >The Nest is an automatically created directory with everything you need to get TF and AmbiqSuite running together and ready to start developing AI features for your application. It is created for your specific target device and only includes needed header files, along with a basic application stub with a <a class="el" href="main_8cc.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function - infinite loop listening and inferring.">main()</a>.</p>
<h3><a class="anchor" id="autotoc_md48"></a>
Building Nest</h3>
<p >Before building a nest, you must first build NeuralSPOT for your desired target. By default, the nest will be created in NeuralSPOT's root directory - set NESTDIR to change where it is built.</p>
<div class="fragment"><div class="line">$&gt; cd neuralSpot</div>
<div class="line">$&gt; make                     # this builds the artifacts needed to build the nest</div>
<div class="line">$&gt; make nest            # this creates the nest, use BINDIR=&lt;your directory&gt; to change where</div>
<div class="line">$&gt; cd nest</div>
<div class="line">$&gt; make                     # this builds the Nest stub. </div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md49"></a>
Nest Directory Contents</h3>
<div class="fragment"><div class="line">Makefile</div>
<div class="line">autogen.mk # Automatically generated by &#39;make nest&#39;</div>
<div class="line">make/</div>
<div class="line">    # helper scripts and make includes</div>
<div class="line">includes/</div>
<div class="line">    # *.h files in preserved original directory structure</div>
<div class="line">libs/</div>
<div class="line">    # needed *.a files for both 3rd party and neuralspot libraries</div>
<div class="line">src/</div>
<div class="line">    main.cc</div>
<div class="line">    model.h</div>
<div class="line">    preserved/</div>
<div class="line">        &lt;previous contents of src - see &#39;upgrade&#39; section below&gt;</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md50"></a>
Updgrading a Nest</h3>
<p >When you create a nest, all source files (include_apis, example source code, libraries, etc.) are copied to NESTDIR. If you are working within a previously created nest, creating a new one with the same NESTDIR destination will overwrite these files. This is necessary for certain files (libraries, include_apis) that are required for NeuralSPOT's functionality, but not critical for the example code.</p>
<p >To ease upgrading existing nests, the makefile will create a /src/preserved directory and copy the existing contents of /src to it.</p>
<p >With this in mind, the nest upgrade workflow goes something like this:</p><ol type="1">
<li>Before upgrading, preserve any non-src work in the  (and consider contributing these changes back to NeuralSPOT, of course):<ol type="a">
<li>Any changes to the Makefile or autogen.mk, or any files in make/</li>
<li>Any changes to files in includes/</li>
<li>Any changes in pack/</li>
</ol>
</li>
<li>Upgrade the nest by running <code>make nest</code> with the same NESTDIR you are already using</li>
<li>Compare /src/preserved to new files in /src, and copy in or merge as needed </li>
</ol>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
