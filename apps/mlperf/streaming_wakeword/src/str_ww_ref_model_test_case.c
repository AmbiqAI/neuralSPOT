/******************************************************************************
 * @file        str_ww_ref_model_model.c
 * @brief       Autogenerated HeliosAOT test case
 * @details     This file was generated by HeliosAOT v0.2.2 on 2025-08-05.
 *   This file is used to verify the correctness of the generated AOT C module.
 *
 * @date        2025-08-05
 *
 * @copyright
 *   © 2025 Ambiq. All rights reserved.
 *
 *   This generated C module is licensed for use **only** on Ambiq hardware
 *   incorporating Ambiq’s sub-threshold power optimized technology.
 *   Any other use is strictly prohibited.
 *
 *   See “LICENSE.txt” at the root of this distribution for full terms.
 *
 * @note        Do not edit this file—any changes will be overwritten.
 ******************************************************************************/

#include <stdint.h>
#include <stdlib.h>
#include <math.h>
#include "ns_ambiqsuite_harness.h"
#include "str_ww_ref_model_model.h"
#include "str_ww_ref_model_test_case.h"


// --- Inputs ---
static const int8_t str_ww_ref_model_test_stimulus_input_0[1200] = {
    -27, 127, 45, 53, 43, -74, -15, 75, -101, -53, -53, -11, 127, -110, 12, -80, 127, -97, -19, 71,
    62, -14, -34, -21, -57, -73, 3, -55, -50, 49, 127, 35, -107, -108, 127, -48, -103, 34, 41, 47,
    -56, -124, 127, -60, 55, 63, 37, -43, -55, 33, 106, 127, -99, -86, 127, 71, 111, -73, 31, 61,
    56, -18, -124, 30, -60, -6, 127, -20, 99, -77, 54, 127, -100, -126, -11, -103, 74, 119, -11, -58,
    -11, 67, -126, 31, 38, 44, -63, 65, -103, -74, 109, 72, -124, -61, -70, -55, -61, -111, -4, 70,
    36, 54, -106, 127, 99, 90, 94, 124, 19, -74, 39, 73, 71, 13, -110, -28, 121, 30, 17, -55,
    -28, 114, 52, 85, -5, 42, -61, 63, -12, -8, 47, 125, -111, 95, -49, -8, -122, -47, 8, -113,
    5, 122, -100, 79, -17, 49, -58, -85, -85, -109, -78, 51, 110, 92, 57, -98, -50, -44, -60, 11,
    17, -32, -32, 96, 85, -45, 119, 127, -40, -32, 9, 126, 109, -100, -22, 22, 8, -76, 104, 55,
    98, 104, 74, -9, 37, -85, 54, -80, 60, -66, -96, -83, -127, 66, 70, 11, -84, -105, -123, -83,
    113, -63, -32, -100, -68, 12, 36, -62, -112, -22, -65, -69, 127, 39, 22, -16, -12, 18, 60, 62,
    -82, 7, -17, 107, 43, 16, -97, 36, -96, -37, -89, 59, -72, -22, 114, -73, 9, -15, -123, 86,
    -109, 0, 23, 42, 58, -60, -125, 67, 17, 98, 94, 100, 3, -38, 86, -6, -78, 103, 110, -2,
    -108, -23, 89, 116, -73, -110, 109, -23, 18, 127, -110, 47, -108, -27, 89, -11, 127, 23, -41, -69,
    -33, -27, -109, -28, -3, 67, 49, 64, -126, -69, 51, 3, -127, 89, 81, 20, -110, 79, 30, 83,
    75, 89, 12, -90, 53, 40, 73, -82, -75, 113, 75, 117, 77, 33, 49, 112, 28, 43, -86, 0,
    66, -55, -73, -43, -63, -70, -13, 117, 9, -77, -107, 60, -25, 94, 50, 87, -55, 59, -57, 126,
    44, -40, -55, -76, 60, -69, 33, -56, 51, 92, 82, 78, -77, -104, 61, -28, -11, -120, -58, -119,
    110, -62, 23, -117, 52, -41, 115, 112, -40, 115, 127, 95, 100, -61, 28, -110, -102, 127, -40, 74,
    90, 104, 127, -63, -117, -17, -93, -122, -31, 84, 25, -43, 49, -65, -124, 79, 41, 78, -117, 98,
    39, 24, 41, 106, 31, 29, 127, 76, -8, 63, -23, -66, 33, 123, 123, -36, 15, -71, 127, 127,
    47, 89, 65, 32, -114, -5, 54, 55, -27, 126, -83, 7, 59, 60, 47, -54, -86, 44, 34, -80,
    63, -5, 52, 98, -82, -123, 83, 37, 61, 98, 89, 127, 17, 4, -19, -86, 27, -53, 121, 30,
    32, -32, -114, -119, -14, -105, 36, 110, 111, 50, -71, 105, 111, -75, 71, -51, 89, 127, -120, 114,
    40, 127, -2, 101, -111, -37, -110, 127, 93, 102, 125, -105, -24, -109, -71, -66, -1, -55, -101, -83,
    -88, 127, 77, 127, -9, -53, 88, -40, -47, -65, -93, -59, -32, 54, -111, -71, 91, -88, -35, 106,
    -86, -106, 3, -46, 24, 89, -91, 29, 9, -89, 41, -54, 4, -106, -4, -45, 94, -113, -15, -4,
    68, 27, 52, 82, 105, -43, 17, 99, 127, 112, -28, -75, 4, 72, 5, 3, 98, -30, 104, -18,
    -39, -5, 78, -94, -75, 127, -81, 25, 29, 4, 46, -66, 21, -27, 51, -90, 26, -78, -53, -69,
    -79, 95, -51, 123, 127, 26, -89, -27, 88, -29, -104, 22, 100, 87, -81, 54, -68, -69, 108, -61,
    -57, -128, 107, 86, 42, 75, -87, -4, -33, -103, 3, 121, -117, -49, -72, -64, 117, -2, -2, 78,
    -86, 4, -12, 33, 127, 80, -20, 96, -82, -120, -73, -36, 10, 38, 118, 10, 7, -114, -119, 21,
    -10, 99, -85, -121, -7, -64, -115, 68, -98, 36, -52, -81, -25, 89, -22, 75, -94, 81, -64, 55,
    25, 123, -23, -110, -123, 95, 14, 81, -65, -35, -120, 127, 52, 124, -56, 37, 55, -42, 101, 127,
    111, 72, -53, -52, 127, -125, 65, 63, 40, 127, -44, -36, -107, -8, -57, -35, 97, 125, -78, -27,
    123, -111, -103, -84, 33, -87, 127, -7, 8, -61, -1, 51, 75, 76, 28, 116, 93, 77, -113, -126,
    -71, 51, -17, -19, 111, 114, 118, -43, 59, -55, -76, -78, -36, -12, 97, -96, 71, 16, -50, 5,
    -47, 33, -11, -84, -96, 20, 116, -35, 70, 50, 124, 94, 25, 50, 115, -20, -40, -125, 95, 88,
    -100, 28, -3, -96, 127, -70, -110, 33, 72, -119, 50, 16, -100, -81, 25, -48, 126, 93, 127, -58,
    127, -11, -34, -114, -114, 59, -4, -67, 38, -60, 28, -31, 95, 94, 1, -33, -30, 90, -39, -72,
    -105, -2, 2, 99, -68, -25, 90, 95, -24, -4, -46, 124, -96, 124, 57, 16, -119, 1, -18, -84,
    49, 127, 24, 65, -110, -15, -97, 38, 126, 51, -107, -32, 21, -19, 97, 92, 37, -27, -59, -99,
    -32, -16, 55, 50, -109, -21, -79, -86, 96, -117, -15, -83, 110, 23, -65, 8, 70, 127, -68, 111,
    124, 120, 44, 42, -19, 75, 16, 55, -12, 70, 95, -88, 97, 18, 100, -11, -26, 119, -60, 100,
    3, 11, -45, 27, -40, -117, -55, -126, 127, 127, -21, 69, -35, 53, 90, 127, -20, 84, -56, 127,
    -121, 35, 50, 58, -95, 126, -79, 40, -68, -45, 20, -15, -85, -82, -15, 77, 115, -105, -22, -101,
    -124, 51, 35, -84, -65, -122, 98, 127, -91, -65, 107, 122, -15, -114, -117, 27, -22, -120, 30, -125,
    85, -45, -117, 31, -21, 127, 19, -54, 64, -55, 116, -27, 21, -114, -13, 97, 90, -67, -67, 93,
    123, -102, -6, -37, 107, -105, -71, 75, -114, 5, -9, -38, -21, 15, -84, 27, 90, 77, -86, -88,
    -56, -30, -18, 56, -113, -119, -22, 60, -76, 45, -58, 111, 114, -48, -66, -17, -63, 54, 95, 54,
    95, -21, -86, 71, -31, 53, -55, -106, 127, -86, 127, 127, 86, 50, 28, 106, -50, -2, 39, -17,
    -12, -39, 24, 102, -74, 124, 58, 94, 22, 83, -124, 93, -117, 112, 127, -49, -71, 79, -60, 106,
    -100, -94, 127, 54, 101, -40, 55, 33, 35, 56, 27, -12, -53, 80, -67, 59, -65, 41, 74, -69,
    -112, -93, 36, 102, -116, 70, -36, 1, 123, -38, -2, -124, -106, -58, -120, 43, -13, 20, -81, -48,
    51, 127, -114, 113, 28, 24, 7, -109, -104, 34, -36, 120, -18, -89, 65, -49, 14, 61, 115, 86,
    55, 56, 127, -48, -128, -55, -69, 51, 43, 32, -124, 69, -41, 52, 22, -35, -92, -102, 97, 120,
    48, -100, -19, 69, 83, -96, -128, 64, -32, -59, -125, 18, 102, 127, 25, 11, -105, 20, -25, 36,
    -23, -63, -102, -43, -102, -80, 127, -8, 16, 108, 127, 29, 92, -40, -45, -19, 54, 56, -43, -92,
    43, -93, 28, 59, 61, 76, 108, 7, 69, 39, -78, -121, -51, -8, 39, 102, -75, -94, 127, -99,
    1, 30, 18, -105, -113, -99, 30, 19, -65, 44, 94, -117, 7, 58, -60, -45, 38, 115, 91, 30
};

// --- Outputs ---
static int8_t str_ww_ref_model_test_stimulus_output_0[3];
static const int8_t str_ww_ref_model_test_stimulus_golden_0[3] = {
    -128, -128, 127
};

// --- Context ---
static void str_ww_ref_model_test_stimulus_callback(
    int32_t op,
    str_ww_ref_model_operator_state_e state,
    int32_t status,
    void *user_data
) {
    if (state == str_ww_ref_model_model_state_finished) {
        ns_lp_printf("Operation %d finished with status %d\n", op, status);
    }
}

str_ww_ref_model_model_context_t str_ww_ref_model_test_stimulus_context = {
    .input_data = {
        str_ww_ref_model_test_stimulus_input_0,
    },
    .input_len = {
        1200,
    },
    .output_data = {
        str_ww_ref_model_test_stimulus_output_0,
    },
    .output_len = {
        3,
    },
    .callback = str_ww_ref_model_test_stimulus_callback,
    .user_data = NULL
};

int32_t
str_ww_ref_model_test_case_init(void)
{
    return str_ww_ref_model_model_init(&str_ww_ref_model_test_stimulus_context);
}

int32_t
str_ww_ref_model_test_case_run(void)
{
    int32_t result = 0;

    result = str_ww_ref_model_model_run(&str_ww_ref_model_test_stimulus_context);
    if (result != 0) {
        ns_lp_printf("Model run failed with status %d\n", result);
        return result;
    }

    // Verify outputs
    for (int i = 0; i < 3; i++) {
        float act = str_ww_ref_model_test_stimulus_output_0[i];
        float exp = str_ww_ref_model_test_stimulus_golden_0[i];
        float diff = fabs(act - exp);
        if (diff > 1.0) {
            ns_lp_printf("Output mismatch at index [%d][%d]: expected %f, got %f\n", 0, i, exp, act);
            result = 1;
        }
    }

    if (result == 0) {
        ns_lp_printf("Test passed!\n");
    } else {
        ns_lp_printf("Test failed!\n");
    }
    return result;

}