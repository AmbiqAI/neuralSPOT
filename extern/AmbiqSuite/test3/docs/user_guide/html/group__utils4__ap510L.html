<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AmbiqSuite User Guide: Utils - HAL Utility Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="paramAlign.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="am_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">AmbiqSuite User Guide<span id="projectnumber">&#160;SDK 5.2.alpha.1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Utils - HAL Utility Functions<div class="ingroups"><a class="el" href="group__hal.html">mcu</a> &raquo; <a class="el" href="group__apollo330P__hal.html">apollo330P</a></div></div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Purpose: This module provides utility functions for the HAL on Apollo5 devices, including delay functions, status checking, and memory operations. It supports precise timing control, status monitoring, and efficient memory access for system-level operations and debugging.</p>
<h1><a class="anchor" id="hal_utils_features"></a>
Key Features</h1>
<ol type="1">
<li><b>Delay</b> <b>Functions:</b> Precise microsecond and cycle-based delay operations.</li>
<li><b>Status</b> <b>Monitoring:</b> Check register status with timeout capabilities.</li>
<li><b>Memory</b> <b>Operations:</b> Efficient word-based memory read operations.</li>
<li><b>Burst</b> <b>Mode:</b> Support for burst mode status checking.</li>
<li><b>BootROM</b> <b>Integration:</b> Integration with bootrom helper functions.</li>
</ol>
<h1><a class="anchor" id="hal_utils_functionality"></a>
Functionality</h1>
<ul>
<li>Provide precise delay functions in microseconds and cycles</li>
<li>Monitor register status with timeout and equality checking</li>
<li>Support efficient memory read operations</li>
<li>Handle burst mode status and configuration</li>
<li>Integrate with bootrom helper functionality</li>
</ul>
<h1><a class="anchor" id="hal_utils_usage"></a>
Usage</h1>
<ol type="1">
<li>Use delay functions for precise timing control</li>
<li>Monitor register status with timeout capabilities</li>
<li>Perform efficient memory read operations</li>
<li>Check burst mode status as needed</li>
<li>Integrate with bootrom helper functions</li>
</ol>
<h1><a class="anchor" id="hal_utils_configuration"></a>
Configuration</h1>
<ul>
<li><b>Delay</b> <b>Timing:</b> Configure delay parameters and cycle counts</li>
<li><b>Status</b> <b>Monitoring:</b> Set up timeout values and status checking</li>
<li><b>Memory</b> <b>Access:</b> Configure memory read operations</li>
<li><b>Burst</b> <b>Mode:</b> Set up burst mode operations </li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga754ea35e941e8667259d7372d5b01ddc" id="r_ga754ea35e941e8667259d7372d5b01ddc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga754ea35e941e8667259d7372d5b01ddc">am_hal_burst_mode_status</a>()&#160;&#160;&#160;<a class="el" href="#ggac82364c07d03af45bf151b90be6cb9fca4ae41676080b05b853fa3aa0eaabdf81">AM_HAL_NORMAL_MODE</a></td></tr>
<tr class="memdesc:ga754ea35e941e8667259d7372d5b01ddc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return current burst mode state.  <br /></td></tr>
<tr class="separator:ga754ea35e941e8667259d7372d5b01ddc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gac82364c07d03af45bf151b90be6cb9fc" id="r_gac82364c07d03af45bf151b90be6cb9fc"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac82364c07d03af45bf151b90be6cb9fc">am_hal_burst_mode_e</a> { <br />
&#160;&#160;<a class="el" href="#ggac82364c07d03af45bf151b90be6cb9fca6b26608b89ddf82cc1aabd33a47d2da9">AM_HAL_BURST_MODE</a>
, <br />
&#160;&#160;<a class="el" href="#ggac82364c07d03af45bf151b90be6cb9fca4ae41676080b05b853fa3aa0eaabdf81">AM_HAL_NORMAL_MODE</a>
<br />
 }</td></tr>
<tr class="memdesc:gac82364c07d03af45bf151b90be6cb9fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mode - the result of a change request.  <a href="#gac82364c07d03af45bf151b90be6cb9fc">More...</a><br /></td></tr>
<tr class="separator:gac82364c07d03af45bf151b90be6cb9fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga10aea9a711b2a899453fafa001e3ffe0" id="r_ga10aea9a711b2a899453fafa001e3ffe0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga10aea9a711b2a899453fafa001e3ffe0">am_hal_delay_us</a> (uint32_t ui32us)</td></tr>
<tr class="memdesc:ga10aea9a711b2a899453fafa001e3ffe0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the bootrom to implement a spin loop.  <br /></td></tr>
<tr class="separator:ga10aea9a711b2a899453fafa001e3ffe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga63d591b4ae36b0e9a8c5273d208ca173" id="r_ga63d591b4ae36b0e9a8c5273d208ca173"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga63d591b4ae36b0e9a8c5273d208ca173">am_hal_delay_us_status_change</a> (uint32_t ui32usMaxDelay, uint32_t ui32Address, uint32_t ui32Mask, uint32_t ui32Value)</td></tr>
<tr class="memdesc:ga63d591b4ae36b0e9a8c5273d208ca173"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delays for a desired amount of cycles while also waiting for a status to change a value.  <br /></td></tr>
<tr class="separator:ga63d591b4ae36b0e9a8c5273d208ca173"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaec35822160898fe575b8a2f59234e9b8" id="r_gaec35822160898fe575b8a2f59234e9b8"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaec35822160898fe575b8a2f59234e9b8">am_hal_delay_us_status_check</a> (uint32_t ui32usMaxDelay, uint32_t ui32Address, uint32_t ui32Mask, uint32_t ui32Value, bool bIsEqual)</td></tr>
<tr class="memdesc:gaec35822160898fe575b8a2f59234e9b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delays for a desired amount of cycles while also waiting for a status to equal OR not-equal to a value.  <br /></td></tr>
<tr class="separator:gaec35822160898fe575b8a2f59234e9b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c605574afb64d87fa4d202692658c5e" id="r_ga7c605574afb64d87fa4d202692658c5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7c605574afb64d87fa4d202692658c5e">am_hal_read_words</a> (uint32_t *pSrcAddr, uint32_t *pDstAddr, uint32_t numWords)</td></tr>
<tr class="memdesc:ga7c605574afb64d87fa4d202692658c5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read words.  <br /></td></tr>
<tr class="separator:ga7c605574afb64d87fa4d202692658c5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa6a833ba9056a676bf6dd920f6b71dd5" id="r_gaa6a833ba9056a676bf6dd920f6b71dd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa6a833ba9056a676bf6dd920f6b71dd5">__attribute__</a> ((naked, section(&quot;.dtcm_text&quot;)))</td></tr>
<tr class="memdesc:gaa6a833ba9056a676bf6dd920f6b71dd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delay function with accurate cycle.  <br /></td></tr>
<tr class="separator:gaa6a833ba9056a676bf6dd920f6b71dd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">BootROM_CYCLES</h2></td></tr>
<tr><td class="ititle" colspan="2"><p>Given an integer number of microseconds, convert to a value representing the number of cycles that will provide that amount of delay. This macro is designed to take into account some of the call overhead and latencies. The BOOTROM_CYCLES_US macro assumes:</p>
<ul>
<li>Burst or normal mode operation.</li>
<li>If cache is not enabled, use <a class="el" href="#gaf39de15d537ff2a0451c6c2100a25b3e">BOOTROM_CYCLES_US_NOCACHE()</a> instead. </li>
</ul>
</td></tr>
<tr class="memitem:ga0efb5e8780532ef6a68cc14bcc2a3c36" id="r_ga0efb5e8780532ef6a68cc14bcc2a3c36"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0efb5e8780532ef6a68cc14bcc2a3c36">CYCLESPERITER</a>&#160;&#160;&#160;((float)<a class="el" href="group__clkgen4__ap510L.html#gae6c450d5e6d389125a013f0622997f9f">AM_HAL_CLKGEN_FREQ_MAX_MHZ</a> / 3)</td></tr>
<tr class="separator:ga0efb5e8780532ef6a68cc14bcc2a3c36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8ec936b2cf31886473d406e69bf6ef7f" id="r_ga8ec936b2cf31886473d406e69bf6ef7f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8ec936b2cf31886473d406e69bf6ef7f">BOOTROM_CYCLES_US</a>(n)&#160;&#160;&#160;((uint32_t)((n) * <a class="el" href="#ga0efb5e8780532ef6a68cc14bcc2a3c36">CYCLESPERITER</a>) + 0)</td></tr>
<tr class="separator:ga8ec936b2cf31886473d406e69bf6ef7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf39de15d537ff2a0451c6c2100a25b3e" id="r_gaf39de15d537ff2a0451c6c2100a25b3e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf39de15d537ff2a0451c6c2100a25b3e">BOOTROM_CYCLES_US_NOCACHE</a>(n)&#160;&#160;&#160;( (n == 0) ? 0 : (uint32_t)(n * <a class="el" href="#ga0efb5e8780532ef6a68cc14bcc2a3c36">CYCLESPERITER</a>) - 5)</td></tr>
<tr class="separator:gaf39de15d537ff2a0451c6c2100a25b3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga754ea35e941e8667259d7372d5b01ddc" name="ga754ea35e941e8667259d7372d5b01ddc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga754ea35e941e8667259d7372d5b01ddc">&#9670;&#160;</a></span>am_hal_burst_mode_status</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define am_hal_burst_mode_status</td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="#ggac82364c07d03af45bf151b90be6cb9fca4ae41676080b05b853fa3aa0eaabdf81">AM_HAL_NORMAL_MODE</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return current burst mode state. </p>
<p>Implemented as a macro, this function returns the current burst mode state. AM_HAL_BURST_MODE AM_HAL_NORMAL_MODE </p>

</div>
</div>
<a id="ga8ec936b2cf31886473d406e69bf6ef7f" name="ga8ec936b2cf31886473d406e69bf6ef7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8ec936b2cf31886473d406e69bf6ef7f">&#9670;&#160;</a></span>BOOTROM_CYCLES_US</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BOOTROM_CYCLES_US</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>n</em></span></td><td>)</td>
          <td>&#160;&#160;&#160;((uint32_t)((n) * <a class="el" href="#ga0efb5e8780532ef6a68cc14bcc2a3c36">CYCLESPERITER</a>) + 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gaf39de15d537ff2a0451c6c2100a25b3e" name="gaf39de15d537ff2a0451c6c2100a25b3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf39de15d537ff2a0451c6c2100a25b3e">&#9670;&#160;</a></span>BOOTROM_CYCLES_US_NOCACHE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BOOTROM_CYCLES_US_NOCACHE</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>n</em></span></td><td>)</td>
          <td>&#160;&#160;&#160;( (n == 0) ? 0 : (uint32_t)(n * <a class="el" href="#ga0efb5e8780532ef6a68cc14bcc2a3c36">CYCLESPERITER</a>) - 5)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga0efb5e8780532ef6a68cc14bcc2a3c36" name="ga0efb5e8780532ef6a68cc14bcc2a3c36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0efb5e8780532ef6a68cc14bcc2a3c36">&#9670;&#160;</a></span>CYCLESPERITER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CYCLESPERITER&#160;&#160;&#160;((float)<a class="el" href="group__clkgen4__ap510L.html#gae6c450d5e6d389125a013f0622997f9f">AM_HAL_CLKGEN_FREQ_MAX_MHZ</a> / 3)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gac82364c07d03af45bf151b90be6cb9fc" name="gac82364c07d03af45bf151b90be6cb9fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac82364c07d03af45bf151b90be6cb9fc">&#9670;&#160;</a></span>am_hal_burst_mode_e</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#gac82364c07d03af45bf151b90be6cb9fc">am_hal_burst_mode_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mode - the result of a change request. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggac82364c07d03af45bf151b90be6cb9fca6b26608b89ddf82cc1aabd33a47d2da9" name="ggac82364c07d03af45bf151b90be6cb9fca6b26608b89ddf82cc1aabd33a47d2da9"></a>AM_HAL_BURST_MODE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ggac82364c07d03af45bf151b90be6cb9fca4ae41676080b05b853fa3aa0eaabdf81" name="ggac82364c07d03af45bf151b90be6cb9fca4ae41676080b05b853fa3aa0eaabdf81"></a>AM_HAL_NORMAL_MODE&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaa6a833ba9056a676bf6dd920f6b71dd5" name="gaa6a833ba9056a676bf6dd920f6b71dd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa6a833ba9056a676bf6dd920f6b71dd5">&#9670;&#160;</a></span>__attribute__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __attribute__ </td>
          <td>(</td>
          <td class="paramtype">(naked, section(&quot;.dtcm_text&quot;))</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delay function with accurate cycle. </p>
<p>Read words.</p>
<p>Read a word.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32Iterations</td><td>The number of iterations.</td></tr>
  </table>
  </dd>
</dl>
<p>This function is located in TCM, which means instruction fetch bypasses I-Cache. Each iteration spends 3 CPU cycles.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pAddr</td><td>The address to read.</td></tr>
  </table>
  </dd>
</dl>
<p>This function is located in TCM, which means instruction fetch bypasses I-Cache.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pSrcAddr</td><td>The starting address to read from. </td></tr>
    <tr><td class="paramname">pDstAddr</td><td>The starting address to write to. </td></tr>
    <tr><td class="paramname">numWords</td><td>The number of words to read.</td></tr>
  </table>
  </dd>
</dl>
<p>This function is located in TCM, which means instruction fetch bypasses I-Cache. </p>

</div>
</div>
<a id="ga10aea9a711b2a899453fafa001e3ffe0" name="ga10aea9a711b2a899453fafa001e3ffe0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga10aea9a711b2a899453fafa001e3ffe0">&#9670;&#160;</a></span>am_hal_delay_us()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void am_hal_delay_us </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>ui32us</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use the bootrom to implement a spin loop. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32us</td><td>- Number of microseconds to delay. Must be &gt;=1; the value of 0 will result in an extremely long delay.</td></tr>
  </table>
  </dd>
</dl>
<p>Use this function to implement a CPU busy waiting spin loop without cache or delay uncertainties.</p>
<dl class="section note"><dt>Note</dt><dd>Interrupts are not disabled during execution of this function. Therefore, any interrupt taken will affect the delay timing. </dd></dl>

</div>
</div>
<a id="ga63d591b4ae36b0e9a8c5273d208ca173" name="ga63d591b4ae36b0e9a8c5273d208ca173"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga63d591b4ae36b0e9a8c5273d208ca173">&#9670;&#160;</a></span>am_hal_delay_us_status_change()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t am_hal_delay_us_status_change </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>ui32usMaxDelay</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>ui32Address</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>ui32Mask</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>ui32Value</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delays for a desired amount of cycles while also waiting for a status to change a value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32usMaxDelay</td><td>- Maximum number of ~1uS delay loops. </td></tr>
    <tr><td class="paramname">ui32Address</td><td>- Address of the register for the status change. </td></tr>
    <tr><td class="paramname">ui32Mask</td><td>- Mask for the status change. </td></tr>
    <tr><td class="paramname">ui32Value</td><td>- Target value for the status change.</td></tr>
  </table>
  </dd>
</dl>
<p>This function will delay for approximately the given number of microseconds while checking for a status change, exiting when either the given time has expired or the status change is detected.</p>
<dl class="section return"><dt>Returns</dt><dd>AM_HAL_STATUS_SUCCESS = status change detected. AM_HAL_STATUS_TIMEOUT = timeout. </dd></dl>

</div>
</div>
<a id="gaec35822160898fe575b8a2f59234e9b8" name="gaec35822160898fe575b8a2f59234e9b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaec35822160898fe575b8a2f59234e9b8">&#9670;&#160;</a></span>am_hal_delay_us_status_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t am_hal_delay_us_status_check </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>ui32usMaxDelay</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>ui32Address</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>ui32Mask</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>ui32Value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>bIsEqual</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delays for a desired amount of cycles while also waiting for a status to equal OR not-equal to a value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32usMaxDelay</td><td>- Maximum number of ~1uS delay loops. </td></tr>
    <tr><td class="paramname">ui32Address</td><td>- Address of the register for the status change. </td></tr>
    <tr><td class="paramname">ui32Mask</td><td>- Mask for the status change. </td></tr>
    <tr><td class="paramname">ui32Value</td><td>- Target value for the status change. </td></tr>
    <tr><td class="paramname">bIsEqual</td><td>- Check for equal if true; not-equal if false.</td></tr>
  </table>
  </dd>
</dl>
<p>This function will delay for approximately the given number of microseconds while checking for a status change, exiting when either the given time has expired or the status change is detected.</p>
<dl class="section return"><dt>Returns</dt><dd>0 = timeout. 1 = status change detected. </dd></dl>

</div>
</div>
<a id="ga7c605574afb64d87fa4d202692658c5e" name="ga7c605574afb64d87fa4d202692658c5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7c605574afb64d87fa4d202692658c5e">&#9670;&#160;</a></span>am_hal_read_words()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void am_hal_read_words </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>pSrcAddr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>pDstAddr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>numWords</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read words. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pSrcAddr</td><td>The starting address to read from. </td></tr>
    <tr><td class="paramname">pDstAddr</td><td>The starting address to write to. </td></tr>
    <tr><td class="paramname">numWords</td><td>The number of words to read.</td></tr>
  </table>
  </dd>
</dl>
<p>The core of this function is located in TCM, which means instruction fetch bypasses I-Cache.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pSrcAddr</td><td>The starting address to read from. </td></tr>
    <tr><td class="paramname">pDstAddr</td><td>The starting address to write to. </td></tr>
    <tr><td class="paramname">numWords</td><td>The number of words to read.</td></tr>
  </table>
  </dd>
</dl>
<p>This function is located in TCM, which means instruction fetch bypasses I-Cache. </p>

</div>
</div>
</div><!-- contents -->
<hr size="1">
    <body>
        <div id="footer" align="right">        
            <small>
                Generated on Thu Oct 30 2025 19:27:28 for the AmbiqSuite User Guide by&nbsp;
                <a href="http://www.ambiqmicro.com">
                <img class="footer" src="./ambiq_logo.png" alt="Ambiq"/></a>&nbsp&nbsp Copyright &copy; 2025&nbsp&nbsp<br />
                This documentation is licensed and distributed under the <a rel="license" href="http://opensource.org/licenses/BSD-3-Clause">BSD 3-Clause License</a>.&nbsp&nbsp<br/>
            </small>
        </div>
    </body>
</html>
