<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AmbiqSuite Examples Guide: Deepsleep Shipmode Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="paramAlign.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="am_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">AmbiqSuite Examples Guide<span id="projectnumber">&#160;SDK 5.2.alpha.1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Deepsleep Shipmode Example<div class="ingroups"><a class="el" href="group__power__examples.html">Power Examples</a></div></div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Purpose: This example demonstrates deep sleep ship mode functionality for battery power preservation during shipping or shelf life. The application showcases power management with no memory retention, GPIO wake-up sources, and immediate software reset upon wake-up.</p>
<h1><a class="anchor" id="deepsleep_shipmode_features"></a>
Key Features</h1>
<ol type="1">
<li><b>Ship</b> <b>Mode</b> <b>Power:</b> Implements deep sleep with no memory retention for battery preservation during shipping</li>
<li><b>GPIO</b> <b>Wake</b> <b>Source:</b> Provides GPIO interrupt wake-up source for flexible power management scenarios</li>
<li><b>Software</b> <b>Reset:</b> Implements immediate software reset upon wake-up for application restart capability</li>
<li><b>Memory</b> <b>Management:</b> Configures memory for low power with no retention in deep sleep for minimal power consumption</li>
<li><b>Assembly</b> <b>Implementation:</b> Uses pure assembly for sleep entry and reset to guarantee no unwanted stack access</li>
</ol>
<h1><a class="anchor" id="deepsleep_shipmode_functionality"></a>
Functionality</h1>
<p>The application performs the following operations:</p><ul>
<li>Initializes memory for low power with no retention in deep sleep</li>
<li>Configures GPIO interrupt as wake-up source</li>
<li>Places device into deep sleep for battery preservation</li>
<li>Measures current draw during ship mode operation</li>
<li>Implements immediate software reset upon wake-up</li>
<li>Provides ship mode power management</li>
</ul>
<h1><a class="anchor" id="deepsleep_shipmode_usage"></a>
Usage</h1>
<ol type="1">
<li>Compile and download the application to target device</li>
<li>Monitor UART output at 115,200 BAUD for status messages</li>
<li>Measure current draw during deep sleep operation</li>
<li>Press push button to wake up the device</li>
<li>Observe immediate software reset and device restart</li>
</ol>
<h1><a class="anchor" id="deepsleep_shipmode_configuration"></a>
Configuration</h1>
<ul>
<li><b>INTERRUPT_GPIO:</b> GPIO pin for wake-up source configuration</li>
<li><b>Memory</b> <b>Retention:</b> No memory retention for minimal power</li>
<li><b>Assembly</b> <b>Processing:</b> Pure assembly implementation for reliability</li>
<li><b>UART</b> <b>Configuration:</b> 115,200 BAUD, 8 bit, no parity</li>
</ul>
<p>Note: The API am_hal_PRE_SLEEP_PROCESSING which handles the deep sleep entry as well as the software reset command upon wakeup is written in pure assembly to guarantee no unwanted stack access generated by the compiler, as the stack would be invalid after the wakeup since all information will be lost when RAM is powered down in sleep.</p>
<p>Text is output to the UART at 115,200 BAUD, 8 bit, no parity.<br  />
 Please note that text end-of-line is a newline (LF) character only.<br  />
 Therefore, the UART terminal must be set to simulate a CR/LF.<br  />
 </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga6aa7f9f9fbaaae7cebdb44023e583a99" id="r_ga6aa7f9f9fbaaae7cebdb44023e583a99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6aa7f9f9fbaaae7cebdb44023e583a99">INTERRUPT_GPIO</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ga6aa7f9f9fbaaae7cebdb44023e583a99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3e061e3f9058f3a2bdcb6fdf0b822976" id="r_ga3e061e3f9058f3a2bdcb6fdf0b822976"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga3e061e3f9058f3a2bdcb6fdf0b822976">GPIO_INT_IRQN</a>&#160;&#160;&#160;GPIO0_001F_IRQn</td></tr>
<tr class="separator:ga3e061e3f9058f3a2bdcb6fdf0b822976"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5527c96dcd451d578c6c7ed7d73a7110" id="r_ga5527c96dcd451d578c6c7ed7d73a7110"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5527c96dcd451d578c6c7ed7d73a7110">am_gpio_isr</a>&#160;&#160;&#160;<a class="el" href="group__ios__burst__controller.html#gab4b1dc828c04d79f060b611b1984b311">am_gpio0_001f_isr</a></td></tr>
<tr class="separator:ga5527c96dcd451d578c6c7ed7d73a7110"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3b3f285c0b1c1ae646b777cbf13f7689" id="r_ga3b3f285c0b1c1ae646b777cbf13f7689"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga3b3f285c0b1c1ae646b777cbf13f7689">am_init_gpio</a> (void)</td></tr>
<tr class="separator:ga3b3f285c0b1c1ae646b777cbf13f7689"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad9d64dab8b0b57240a2fb4fc50a5fabb" id="r_gad9d64dab8b0b57240a2fb4fc50a5fabb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad9d64dab8b0b57240a2fb4fc50a5fabb">am_hal_PRE_SLEEP_PROCESSING</a> (void)</td></tr>
<tr class="separator:gad9d64dab8b0b57240a2fb4fc50a5fabb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga840291bc02cba5474a4cb46a9b9566fe" id="r_ga840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="separator:ga840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga23745172f8da2babfd605591c56ec0b1" id="r_ga23745172f8da2babfd605591c56ec0b1"><td class="memItemLeft" align="right" valign="top">const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga23745172f8da2babfd605591c56ec0b1">ui32CpdlpstateAddr</a> = (uint32_t)&amp;(PWRMODCTL -&gt; CPDLPSTATE)</td></tr>
<tr class="separator:ga23745172f8da2babfd605591c56ec0b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa07d4291d917ca11866bf7be0e5f0a95" id="r_gaa07d4291d917ca11866bf7be0e5f0a95"><td class="memItemLeft" align="right" valign="top">const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa07d4291d917ca11866bf7be0e5f0a95">ui32SyncReadAddr</a> = (uint32_t)SYNC_READ</td></tr>
<tr class="separator:gaa07d4291d917ca11866bf7be0e5f0a95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae30658de12d7d0b5ecb6c589d8989cab" id="r_gae30658de12d7d0b5ecb6c589d8989cab"><td class="memItemLeft" align="right" valign="top">const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae30658de12d7d0b5ecb6c589d8989cab">ui32SwpoiAddr</a> = (uint32_t)&amp;(RSTGEN -&gt; SWPOI)</td></tr>
<tr class="separator:gae30658de12d7d0b5ecb6c589d8989cab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga5527c96dcd451d578c6c7ed7d73a7110" name="ga5527c96dcd451d578c6c7ed7d73a7110"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5527c96dcd451d578c6c7ed7d73a7110">&#9670;&#160;</a></span>am_gpio_isr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define am_gpio_isr</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>void</em></span></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group__ios__burst__controller.html#gab4b1dc828c04d79f060b611b1984b311">am_gpio0_001f_isr</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga3e061e3f9058f3a2bdcb6fdf0b822976" name="ga3e061e3f9058f3a2bdcb6fdf0b822976"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3e061e3f9058f3a2bdcb6fdf0b822976">&#9670;&#160;</a></span>GPIO_INT_IRQN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GPIO_INT_IRQN&#160;&#160;&#160;GPIO0_001F_IRQn</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga6aa7f9f9fbaaae7cebdb44023e583a99" name="ga6aa7f9f9fbaaae7cebdb44023e583a99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6aa7f9f9fbaaae7cebdb44023e583a99">&#9670;&#160;</a></span>INTERRUPT_GPIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INTERRUPT_GPIO&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gad9d64dab8b0b57240a2fb4fc50a5fabb" name="gad9d64dab8b0b57240a2fb4fc50a5fabb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad9d64dab8b0b57240a2fb4fc50a5fabb">&#9670;&#160;</a></span>am_hal_PRE_SLEEP_PROCESSING()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void am_hal_PRE_SLEEP_PROCESSING </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga3b3f285c0b1c1ae646b777cbf13f7689" name="ga3b3f285c0b1c1ae646b777cbf13f7689"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3b3f285c0b1c1ae646b777cbf13f7689">&#9670;&#160;</a></span>am_init_gpio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void am_init_gpio </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga840291bc02cba5474a4cb46a9b9566fe" name="ga840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga840291bc02cba5474a4cb46a9b9566fe">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga23745172f8da2babfd605591c56ec0b1" name="ga23745172f8da2babfd605591c56ec0b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga23745172f8da2babfd605591c56ec0b1">&#9670;&#160;</a></span>ui32CpdlpstateAddr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t ui32CpdlpstateAddr = (uint32_t)&amp;(PWRMODCTL -&gt; CPDLPSTATE)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gae30658de12d7d0b5ecb6c589d8989cab" name="gae30658de12d7d0b5ecb6c589d8989cab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae30658de12d7d0b5ecb6c589d8989cab">&#9670;&#160;</a></span>ui32SwpoiAddr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t ui32SwpoiAddr = (uint32_t)&amp;(RSTGEN -&gt; SWPOI)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gaa07d4291d917ca11866bf7be0e5f0a95" name="gaa07d4291d917ca11866bf7be0e5f0a95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa07d4291d917ca11866bf7be0e5f0a95">&#9670;&#160;</a></span>ui32SyncReadAddr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t ui32SyncReadAddr = (uint32_t)SYNC_READ</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<hr size="1">
    <body>
        <div id="footer" align="right">        
            <small>
                Generated on Thu Oct 30 2025 19:23:45 for the AmbiqSuite Examples Guide by&nbsp;
                <a href="http://www.ambiqmicro.com">
                <img class="footer" src="./ambiq_logo.png" alt="Ambiq"/></a>&nbsp&nbsp Copyright &copy; 2025&nbsp&nbsp<br />
                This documentation is licensed and distributed under the <a rel="license" href="http://opensource.org/licenses/BSD-3-Clause">BSD 3-Clause License</a>.&nbsp&nbsp<br/>
            </small>
        </div>
    </body>
</html>
