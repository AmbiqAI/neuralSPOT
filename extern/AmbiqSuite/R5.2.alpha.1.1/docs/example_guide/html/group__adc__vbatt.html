<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AmbiqSuite Examples Guide: ADC VBatt Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="paramAlign.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="am_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">AmbiqSuite Examples Guide<span id="projectnumber">&#160;SDK 5.2.alpha.1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">ADC VBatt Example<div class="ingroups"><a class="el" href="group__peripheral__examples.html">Peripheral Examples</a></div></div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Purpose: This example demonstrates ADC (Analog-to-Digital Converter) functionality for battery voltage monitoring and temperature sensing. The application showcases ADC configuration for VBATT voltage divider measurement, temperature sensor reading, and battery load control. The example implements voltage monitoring with configurable battery load switching, temperature compensation, and real-time voltage measurement for battery-powered applications requiring accurate power management and thermal monitoring.</p>
<h1><a class="anchor" id="adc_vbatt_features"></a>
Key Features</h1>
<ol type="1">
<li><b>VBATT</b> <b>Voltage</b> <b>Monitoring:</b> Implements battery voltage measurement using voltage divider with precise ADC sampling</li>
<li><b>Temperature</b> <b>Sensing:</b> Provides temperature sensor reading for thermal monitoring and compensation</li>
<li><b>Battery</b> <b>Load</b> <b>Control:</b> Implements configurable battery load switching for power consumption testing and monitoring</li>
<li><b>Real</b> <b>Time</b> <b>Monitoring:</b> Provides continuous voltage and temperature monitoring with periodic status updates</li>
<li><b>Power</b> <b>Management:</b> Demonstrates power-efficient operation with deep sleep modes and periodic wake-up for measurements</li>
</ol>
<h1><a class="anchor" id="adc_vbatt_functionality"></a>
Functionality</h1>
<p>The application performs the following operations:</p><ul>
<li>Initializes ADC with proper configuration for voltage and temperature sensing</li>
<li>Implements interrupt-driven ADC sampling for VBATT and temperature</li>
<li>Provides battery load control with button-triggered switching</li>
<li>Implements voltage divider measurement with calibration</li>
<li>Demonstrates temperature sensor reading and compensation</li>
<li>Monitors power consumption and provides real-time status updates</li>
</ul>
<h1><a class="anchor" id="adc_vbatt_usage"></a>
Usage</h1>
<ol type="1">
<li>Connect battery voltage divider and temperature sensor</li>
<li>Compile and download the application to target device</li>
<li>Monitor SWO output for voltage and temperature measurements</li>
<li>Press button 0 to toggle battery load for power consumption testing</li>
</ol>
<h1><a class="anchor" id="adc_vbatt_configuration"></a>
Configuration</h1>
<ul>
<li><b>SLOT_BATT:</b> ADC slot for battery voltage measurement (default: 5)</li>
<li><b>SLOT_TEMP:</b> ADC slot for temperature sensor (default: 7)</li>
<li><b>ISR_SAMPLE_COUNT:</b> Configurable sampling frequency</li>
<li><b>AM_DEBUG_PRINTF:</b> Enables detailed debug output via SWO</li>
</ul>
<p>Additional Information: The expected VBATT voltage as measured for the Apollo4 EVB is ~0.65V. In general the measured voltage should be VDD / 3.</p>
<p>Printing takes place over the SWO at 1MHz. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga9b4ca3943b3b79d6ec769c374ca12310" id="r_ga9b4ca3943b3b79d6ec769c374ca12310"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9b4ca3943b3b79d6ec769c374ca12310">SLOT_BATT</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:ga9b4ca3943b3b79d6ec769c374ca12310"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7856b1fb3cfdedf73958801cd0260c9a" id="r_ga7856b1fb3cfdedf73958801cd0260c9a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7856b1fb3cfdedf73958801cd0260c9a">SLOT_TEMP</a>&#160;&#160;&#160;7</td></tr>
<tr class="separator:ga7856b1fb3cfdedf73958801cd0260c9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga11b4d16bcf5181008f07589157adfe01" id="r_ga11b4d16bcf5181008f07589157adfe01"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga11b4d16bcf5181008f07589157adfe01">LED_DEEPSLEEP</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ga11b4d16bcf5181008f07589157adfe01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4d0ba7ae3e2a4f2ad52f56dcebd4975" id="r_gae4d0ba7ae3e2a4f2ad52f56dcebd4975"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae4d0ba7ae3e2a4f2ad52f56dcebd4975">LED_ADC_ISR</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:gae4d0ba7ae3e2a4f2ad52f56dcebd4975"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga13490181996502b014f67b5617b2c534" id="r_ga13490181996502b014f67b5617b2c534"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga13490181996502b014f67b5617b2c534">LED_VBATT_LOAD</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:ga13490181996502b014f67b5617b2c534"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gafb010cd585fa52b76a90b03319005307" id="r_gafb010cd585fa52b76a90b03319005307"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafb010cd585fa52b76a90b03319005307">am_adc_isr</a> (void)</td></tr>
<tr class="separator:gafb010cd585fa52b76a90b03319005307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b815e6730e8723a6d1d06d9ef8f31c0" id="r_ga2b815e6730e8723a6d1d06d9ef8f31c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2b815e6730e8723a6d1d06d9ef8f31c0">adc_init</a> (void)</td></tr>
<tr class="separator:ga2b815e6730e8723a6d1d06d9ef8f31c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga840291bc02cba5474a4cb46a9b9566fe" id="r_ga840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="separator:ga840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga8c19b3598452470a3222ebd125407b25" id="r_ga8c19b3598452470a3222ebd125407b25"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8c19b3598452470a3222ebd125407b25">g_ui32SampleCount</a></td></tr>
<tr class="separator:ga8c19b3598452470a3222ebd125407b25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf2755f1747e019cacea0d46f2fdf5b46" id="r_gaf2755f1747e019cacea0d46f2fdf5b46"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf2755f1747e019cacea0d46f2fdf5b46">g_ui16ADCVDD_code</a></td></tr>
<tr class="separator:gaf2755f1747e019cacea0d46f2fdf5b46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae68d9cf32523db6979afe315c17e93e6" id="r_gae68d9cf32523db6979afe315c17e93e6"><td class="memItemLeft" align="right" valign="top">AM_SHARED_RW uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae68d9cf32523db6979afe315c17e93e6">axiScratchBuf</a> [20]</td></tr>
<tr class="separator:gae68d9cf32523db6979afe315c17e93e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacaa77cb74b81a152882170ac859dd84a" id="r_gacaa77cb74b81a152882170ac859dd84a"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacaa77cb74b81a152882170ac859dd84a">g_ui16ADCTEMP_code</a></td></tr>
<tr class="separator:gacaa77cb74b81a152882170ac859dd84a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gae4d0ba7ae3e2a4f2ad52f56dcebd4975" name="gae4d0ba7ae3e2a4f2ad52f56dcebd4975"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae4d0ba7ae3e2a4f2ad52f56dcebd4975">&#9670;&#160;</a></span>LED_ADC_ISR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LED_ADC_ISR&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga11b4d16bcf5181008f07589157adfe01" name="ga11b4d16bcf5181008f07589157adfe01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga11b4d16bcf5181008f07589157adfe01">&#9670;&#160;</a></span>LED_DEEPSLEEP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LED_DEEPSLEEP&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga13490181996502b014f67b5617b2c534" name="ga13490181996502b014f67b5617b2c534"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga13490181996502b014f67b5617b2c534">&#9670;&#160;</a></span>LED_VBATT_LOAD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LED_VBATT_LOAD&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga9b4ca3943b3b79d6ec769c374ca12310" name="ga9b4ca3943b3b79d6ec769c374ca12310"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9b4ca3943b3b79d6ec769c374ca12310">&#9670;&#160;</a></span>SLOT_BATT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SLOT_BATT&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga7856b1fb3cfdedf73958801cd0260c9a" name="ga7856b1fb3cfdedf73958801cd0260c9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7856b1fb3cfdedf73958801cd0260c9a">&#9670;&#160;</a></span>SLOT_TEMP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SLOT_TEMP&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga2b815e6730e8723a6d1d06d9ef8f31c0" name="ga2b815e6730e8723a6d1d06d9ef8f31c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2b815e6730e8723a6d1d06d9ef8f31c0">&#9670;&#160;</a></span>adc_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adc_init </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gafb010cd585fa52b76a90b03319005307" name="gafb010cd585fa52b76a90b03319005307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafb010cd585fa52b76a90b03319005307">&#9670;&#160;</a></span>am_adc_isr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void am_adc_isr </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga840291bc02cba5474a4cb46a9b9566fe" name="ga840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga840291bc02cba5474a4cb46a9b9566fe">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="gae68d9cf32523db6979afe315c17e93e6" name="gae68d9cf32523db6979afe315c17e93e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae68d9cf32523db6979afe315c17e93e6">&#9670;&#160;</a></span>axiScratchBuf</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AM_SHARED_RW uint32_t axiScratchBuf[20]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gacaa77cb74b81a152882170ac859dd84a" name="gacaa77cb74b81a152882170ac859dd84a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacaa77cb74b81a152882170ac859dd84a">&#9670;&#160;</a></span>g_ui16ADCTEMP_code</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t g_ui16ADCTEMP_code</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gaf2755f1747e019cacea0d46f2fdf5b46" name="gaf2755f1747e019cacea0d46f2fdf5b46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf2755f1747e019cacea0d46f2fdf5b46">&#9670;&#160;</a></span>g_ui16ADCVDD_code</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t g_ui16ADCVDD_code</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga8c19b3598452470a3222ebd125407b25" name="ga8c19b3598452470a3222ebd125407b25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8c19b3598452470a3222ebd125407b25">&#9670;&#160;</a></span>g_ui32SampleCount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t g_ui32SampleCount</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<hr size="1">
    <body>
        <div id="footer" align="right">        
            <small>
                Generated on Thu Oct 30 2025 19:23:45 for the AmbiqSuite Examples Guide by&nbsp;
                <a href="http://www.ambiqmicro.com">
                <img class="footer" src="./ambiq_logo.png" alt="Ambiq"/></a>&nbsp&nbsp Copyright &copy; 2025&nbsp&nbsp<br />
                This documentation is licensed and distributed under the <a rel="license" href="http://opensource.org/licenses/BSD-3-Clause">BSD 3-Clause License</a>.&nbsp&nbsp<br/>
            </small>
        </div>
    </body>
</html>
