<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AmbiqSuite Examples Guide: TIMER PWM Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="paramAlign.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="am_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">AmbiqSuite Examples Guide<span id="projectnumber">&#160;SDK 5.2.alpha.1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle"><div class="title">TIMER PWM Example<div class="ingroups"><a class="el" href="group__peripheral__examples.html">Peripheral Examples</a></div></div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Purpose: This example demonstrates Timer PWM (Pulse Width Modulation) functionality for LED brightness control and analog signal generation. The application showcases dual-timer architecture with high frequency PWM generation and low frequency duty cycle modulation. The example implements sine-wave based brightness profiles for smooth LED breathing effects, demonstrating timer configuration and interrupt-driven PWM control for precise analog signal generation.</p>
<h1><a class="anchor" id="timer_pwm_output_features"></a>
Key Features</h1>
<ol type="1">
<li><b>Dual</b> <b>Timer</b> <b>Architecture:</b> Implements high-frequency PWM timer and low-frequency duty cycle modulation timer for control</li>
<li><b>PWM</b> <b>Generation:</b> Provides precise pulse width modulation with configurable frequency and duty cycle for analog signal generation</li>
<li><b>LED</b> <b>Brightness</b> <b>Control:</b> Demonstrates smooth LED breathing effects using sine-wave based brightness profiles</li>
<li><b>Interrupt</b> <b>Driven</b> <b>Control:</b> Implements timer interrupt service routines for real-time PWM parameter updates</li>
<li><b>Low</b> <b>Power</b> <b>Operation:</b> Optimizes for low power consumption with reduced DTCM size and efficient timer management</li>
</ol>
<h1><a class="anchor" id="timer_pwm_output_functionality"></a>
Functionality</h1>
<p>The application performs the following operations:</p><ul>
<li>Initializes dual timer configuration for PWM and duty cycle control</li>
<li>Implements sine-wave brightness profile generation and scaling</li>
<li>Configures high-frequency PWM timer for LED control</li>
<li>Sets up low-frequency timer for duty cycle modulation</li>
<li>Implements interrupt-driven PWM parameter updates</li>
<li>Provides real-time LED brightness control and monitoring</li>
<li>Optimizes power consumption for battery-powered applications</li>
</ul>
<h1><a class="anchor" id="timer_pwm_output_usage"></a>
Usage</h1>
<ol type="1">
<li>Connect LEDs to designated PWM output pins</li>
<li>Compile and download the application to target device</li>
<li>Observe LED breathing effect with smooth brightness transitions</li>
<li>Monitor ITM output for PWM status and configuration information</li>
</ol>
<h1><a class="anchor" id="timer_pwm_output_configuration"></a>
Configuration</h1>
<ul>
<li><b>PWM_FREQ:</b> Configurable PWM frequency (default: 200 Hz)</li>
<li><b>PWM_CLK:</b> Configurable PWM clock source (default: HFRC_DIV16)</li>
<li><b>LED_CYCLE_TIMER:</b> Timer for duty cycle updates (default: Timer 2)</li>
<li><b>TABLE_ENTRIES:</b> Sine wave table resolution (default: 64 entries)</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>This example shows a low power operation using reduced DTCM size The 8K size is very near the limit with most BSPs. The standard stack size had to be slightly reduced for this example's RAM use to fit in 8K.(with IAR compiler)</dd></dl>
<p>Printing takes place over the ITM at 1MHz. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga343fdd33538c9171d70656fa7fc47869" id="r_ga343fdd33538c9171d70656fa7fc47869"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga343fdd33538c9171d70656fa7fc47869">AM_BSP_PWM_LED_TIMER</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ga343fdd33538c9171d70656fa7fc47869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga158a619e9a48706db58aefcdd1c68d46" id="r_ga158a619e9a48706db58aefcdd1c68d46"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga158a619e9a48706db58aefcdd1c68d46">TIMER_PWM_OUTPUT_PIN0</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:ga158a619e9a48706db58aefcdd1c68d46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab36ee0de8161011aad79d57dd139d56d" id="r_gab36ee0de8161011aad79d57dd139d56d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab36ee0de8161011aad79d57dd139d56d">TIMER_PWM_OUTPUT_PIN1</a>&#160;&#160;&#160;11</td></tr>
<tr class="separator:gab36ee0de8161011aad79d57dd139d56d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab2e0351df77f4d74adf1693240edbaa0" id="r_gab2e0351df77f4d74adf1693240edbaa0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab2e0351df77f4d74adf1693240edbaa0">PWM_CLK</a>&#160;&#160;&#160;AM_HAL_TIMER_CLOCK_HFRC_DIV16</td></tr>
<tr class="separator:gab2e0351df77f4d74adf1693240edbaa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76fe84d83b8d236bd4f0d20d7e2ed06f" id="r_ga76fe84d83b8d236bd4f0d20d7e2ed06f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga76fe84d83b8d236bd4f0d20d7e2ed06f">PWM_FREQ</a>&#160;&#160;&#160;200</td></tr>
<tr class="separator:ga76fe84d83b8d236bd4f0d20d7e2ed06f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f3997968ba5f10fd6e8fd00ea251cff" id="r_ga5f3997968ba5f10fd6e8fd00ea251cff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5f3997968ba5f10fd6e8fd00ea251cff">FREQ_FRAC_SCALING</a>&#160;&#160;&#160;128</td></tr>
<tr class="separator:ga5f3997968ba5f10fd6e8fd00ea251cff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga18e7a5cf994f249cff699dbe2d00eae7" id="r_ga18e7a5cf994f249cff699dbe2d00eae7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga18e7a5cf994f249cff699dbe2d00eae7">LFRC_TCIKS_SEC</a>&#160;&#160;&#160;900</td></tr>
<tr class="separator:ga18e7a5cf994f249cff699dbe2d00eae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8fc3acda54a3d8d54ad0892607e2ea07" id="r_ga8fc3acda54a3d8d54ad0892607e2ea07"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8fc3acda54a3d8d54ad0892607e2ea07">LED_CYCLE_TIMER</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ga8fc3acda54a3d8d54ad0892607e2ea07"><td class="mdescLeft">&#160;</td><td class="mdescRight">using this timer for the lower freq duty cycle update timer  <br /></td></tr>
<tr class="separator:ga8fc3acda54a3d8d54ad0892607e2ea07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd81848b2e3b5695fb6f0cc2939407e1" id="r_gabd81848b2e3b5695fb6f0cc2939407e1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gabd81848b2e3b5695fb6f0cc2939407e1">TABLE_ENTRIES</a>&#160;&#160;&#160;64</td></tr>
<tr class="separator:gabd81848b2e3b5695fb6f0cc2939407e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga794e2f4d347b93a90cfdd9a3238f2b17" id="r_ga794e2f4d347b93a90cfdd9a3238f2b17"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga794e2f4d347b93a90cfdd9a3238f2b17">TABLE_SCALE</a>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:ga794e2f4d347b93a90cfdd9a3238f2b17"><td class="mdescLeft">&#160;</td><td class="mdescRight">max value any table element can have  <br /></td></tr>
<tr class="separator:ga794e2f4d347b93a90cfdd9a3238f2b17"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga343fdd33538c9171d70656fa7fc47869" name="ga343fdd33538c9171d70656fa7fc47869"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga343fdd33538c9171d70656fa7fc47869">&#9670;&#160;</a></span>AM_BSP_PWM_LED_TIMER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AM_BSP_PWM_LED_TIMER&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga5f3997968ba5f10fd6e8fd00ea251cff" name="ga5f3997968ba5f10fd6e8fd00ea251cff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f3997968ba5f10fd6e8fd00ea251cff">&#9670;&#160;</a></span>FREQ_FRAC_SCALING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FREQ_FRAC_SCALING&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga8fc3acda54a3d8d54ad0892607e2ea07" name="ga8fc3acda54a3d8d54ad0892607e2ea07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8fc3acda54a3d8d54ad0892607e2ea07">&#9670;&#160;</a></span>LED_CYCLE_TIMER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LED_CYCLE_TIMER&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>using this timer for the lower freq duty cycle update timer </p>

</div>
</div>
<a id="ga18e7a5cf994f249cff699dbe2d00eae7" name="ga18e7a5cf994f249cff699dbe2d00eae7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga18e7a5cf994f249cff699dbe2d00eae7">&#9670;&#160;</a></span>LFRC_TCIKS_SEC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LFRC_TCIKS_SEC&#160;&#160;&#160;900</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gab2e0351df77f4d74adf1693240edbaa0" name="gab2e0351df77f4d74adf1693240edbaa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab2e0351df77f4d74adf1693240edbaa0">&#9670;&#160;</a></span>PWM_CLK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PWM_CLK&#160;&#160;&#160;AM_HAL_TIMER_CLOCK_HFRC_DIV16</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga76fe84d83b8d236bd4f0d20d7e2ed06f" name="ga76fe84d83b8d236bd4f0d20d7e2ed06f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga76fe84d83b8d236bd4f0d20d7e2ed06f">&#9670;&#160;</a></span>PWM_FREQ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PWM_FREQ&#160;&#160;&#160;200</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gabd81848b2e3b5695fb6f0cc2939407e1" name="gabd81848b2e3b5695fb6f0cc2939407e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabd81848b2e3b5695fb6f0cc2939407e1">&#9670;&#160;</a></span>TABLE_ENTRIES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TABLE_ENTRIES&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga794e2f4d347b93a90cfdd9a3238f2b17" name="ga794e2f4d347b93a90cfdd9a3238f2b17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga794e2f4d347b93a90cfdd9a3238f2b17">&#9670;&#160;</a></span>TABLE_SCALE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TABLE_SCALE&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>max value any table element can have </p>

</div>
</div>
<a id="ga158a619e9a48706db58aefcdd1c68d46" name="ga158a619e9a48706db58aefcdd1c68d46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga158a619e9a48706db58aefcdd1c68d46">&#9670;&#160;</a></span>TIMER_PWM_OUTPUT_PIN0</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_PWM_OUTPUT_PIN0&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gab36ee0de8161011aad79d57dd139d56d" name="gab36ee0de8161011aad79d57dd139d56d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab36ee0de8161011aad79d57dd139d56d">&#9670;&#160;</a></span>TIMER_PWM_OUTPUT_PIN1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_PWM_OUTPUT_PIN1&#160;&#160;&#160;11</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<hr size="1">
    <body>
        <div id="footer" align="right">        
            <small>
                Generated on Thu Oct 30 2025 19:23:46 for the AmbiqSuite Examples Guide by&nbsp;
                <a href="http://www.ambiqmicro.com">
                <img class="footer" src="./ambiq_logo.png" alt="Ambiq"/></a>&nbsp&nbsp Copyright &copy; 2025&nbsp&nbsp<br />
                This documentation is licensed and distributed under the <a rel="license" href="http://opensource.org/licenses/BSD-3-Clause">BSD 3-Clause License</a>.&nbsp&nbsp<br/>
            </small>
        </div>
    </body>
</html>
